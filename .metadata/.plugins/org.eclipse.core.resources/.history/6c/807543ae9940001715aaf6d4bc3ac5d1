package models;
import java.io.Serializable;
import java.sql.ResultSet;

import javax.servlet.http.HttpSession;

import database.DataBase;

public class BeanLogin implements Serializable {

	private static final long serialVersionUID = 1L;
	private String user = "";
	private String pass = "";
	public String getUser() {
		return user;
	}
	public void setUser(String user) {
		this.user = user;
	}
	public String getPass() {
		return pass;
	}
	public void setPass(String pass) {
		this.pass = pass;
	}
	
	public void getAcces(String user, String pass){
		String query = "SELECT COUNT(*) FROM users WHERE username = '"+ user +"' and passwd = '" + pass + "'";
		try {
			DB = new DataBase();
			ResultSet res = DB.executeSQL(query);
			res.next();
			if(res.getInt(1) > 0) {
				request.setAttribute("acces", "true");
				HttpSession session = request.getSession();
				session.setAttribute("user", user);
			}
			else request.setAttribute("acces", "false");
			doGet(request, response);
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
}
